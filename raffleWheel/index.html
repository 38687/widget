<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>简易抽奖小转盘</title>
<meta name="keywords" content="简易抽奖转盘,原生js抽奖转盘,css3抽奖转盘,h5抽奖转盘" />
<meta name="description" content="原生javascript和css3写的简易抽奖小转盘，自定义设置奖项" />
<link type="text/css" rel="stylesheet" href="style/common.css" />
<script type="text/javascript" src="script/common.js"></script>
<script type="text/javascript">
var prizeArr=[
  {
    prizeId:0,  // 奖品ID
    quantity:1, // 奖品数量，抽宛去除该奖项
    prizeName:"谢谢惠顾", // 奖品等级
    prizeBrief:"-", // 奖品内容
    prizePic:'images/g0.png'  // 奖品图标地址
  },
  {prizeId:1,quantity:1,prizeName:"一等奖",prizeBrief:"MacPro-13' 2021",prizePic:'images/g1.png'},
  {prizeId:2,quantity:1,prizeName:"二等奖",prizeBrief:"iPhone12",prizePic:'images/g2.png'},
  {prizeId:3,quantity:1,prizeName:"三等奖",prizeBrief:"红包 ￥5000",prizePic:'images/g3.png'},
  {prizeId:4,quantity:1,prizeName:"四等奖",prizeBrief:"iPadmini5",prizePic:'images/g4.png'},
  {prizeId:5,quantity:1,prizeName:"五等奖",prizeBrief:"红包 ￥1000",prizePic:'images/g5.png'},
  {prizeId:6,quantity:1,prizeName:"六等奖",prizeBrief:"红包 ￥500",prizePic:'images/g6.png'},
  {prizeId:7,quantity:1,prizeName:"七等奖",prizeBrief:"256G U盘",prizePic:'images/g7.png'}
];
window.onload=function(){
  let oDiv=document.getElementsByClassName("wheel")[0];   // 转盘容器
  let oDraw=document.getElementsByClassName("draw")[0];   // 转盘按钮
  let timer=null;
  var xo=new RaffleWheel(oDiv,prizeArr);  // 转盘组件。生成转盘及奖项

  // 请求操作.测试
  oDraw.addEventListener("click",function(ev){
    var award=Math.floor(Math.random()*prizeArr.length);  // 测试·抽奖随机数
    console.log(award);
    xo.drawHandle(award); // 转动

    clearTimeout(timer);
    timer=setTimeout(function(){
      let textStr=award?("恭喜你抽中"+prizeArr[award].prizeName+" 获得 "+prizeArr[award].prizeBrief+" ！"):("很遗憾没有抽中任何奖品，再接再厉吧~加油！");
      alert(textStr);
    },3350)
  },false)
}
</script>
</head>
<body>
  <div class="wheel">
    <a class="draw drawMov" href="javascript:void(0);">点击<br />抽奖</a>
  </div>

</body>
</html>